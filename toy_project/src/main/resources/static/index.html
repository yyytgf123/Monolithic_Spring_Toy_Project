<!doctype html>
<html lang="ko">
<head>
    <meta charset="utf-8" />
    <title>Post API Test Console</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
        body {
            font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
            background: #f6f7f9;
            margin: 0;
            padding: 20px;
        }
        h1 { margin-top: 0; }
        section {
            background: #fff;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            border: 1px solid #e5e7eb;
        }
        label {
            display: block;
            font-size: 12px;
            margin-bottom: 6px;
            color: #374151;
        }
        input, textarea, button {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 8px;
            border: 1px solid #d1d5db;
        }
        textarea { resize: vertical; }
        button {
            background: #111827;
            color: #fff;
            border: none;
            cursor: pointer;
        }
        .row { display: flex; gap: 10px; }
        .success { color: #065f46; font-size: 13px; }
        .error { color: #b91c1c; font-size: 13px; white-space: pre-wrap; }
        .jsonbox {
            background: #0b1020;
            color: #e5e7eb;
            padding: 10px;
            border-radius: 8px;
            font-family: ui-monospace, monospace;
            font-size: 12px;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>

<h1>Post API 테스트 콘솔</h1>

<section>
    <h3>공통 설정</h3>
    <label>Base URL</label>
    <input id="baseUrl" value="/api/posts" />
</section>

<section>
    <h3>게시글 생성 (POST)</h3>
    <label>작성자 ID</label>
    <input id="authorId" type="number" />

    <label>제목</label>
    <input id="title" />

    <label>내용</label>
    <textarea id="content"></textarea>

    <button id="btnCreate">생성</button>
    <div id="createMsg" class="success"></div>
    <div id="createErr" class="error"></div>
</section>

<section>
    <h3>게시글 상세 조회 (GET)</h3>
    <div class="row">
        <input id="detailId" type="number" placeholder="게시글 ID" />
        <button id="btnDetail">조회</button>
    </div>
    <div id="detailOut" class="jsonbox">{}</div>
    <div id="detailErr" class="error"></div>
</section>

<section>
    <h3>게시글 수정 (PUT)</h3>
    <label>게시글 ID</label>
    <input id="updateId" type="number" />

    <label>제목</label>
    <input id="updateTitle" />

    <label>내용</label>
    <textarea id="updateContent"></textarea>

    <button id="btnUpdate">수정</button>
    <div id="updateMsg" class="success"></div>
    <div id="updateErr" class="error"></div>
</section>

<section>
    <h3>게시글 삭제 (DELETE)</h3>
    <div class="row">
        <input id="deleteId" type="number" placeholder="게시글 ID" />
        <button id="btnDelete">삭제</button>
    </div>
    <div id="deleteMsg" class="success"></div>
    <div id="deleteErr" class="error"></div>
</section>
<script>
    const base = () => document.getElementById("baseUrl").value.trim();

    async function request(url, options, successEl, errorEl, outEl) {
        successEl && (successEl.textContent = "");
        errorEl && (errorEl.textContent = "");
        try {
            const res = await fetch(url, {
                headers: { "Content-Type": "application/json" },
                ...options
            });

            if (!res.ok) {
                errorEl.textContent = await res.text();
                return;
            }

            if (res.status === 204) {
                successEl.textContent = "요청 성공";
                return;
            }

            const data = await res.json();
            outEl && (outEl.textContent = JSON.stringify(data, null, 2));
            successEl && (successEl.textContent = "요청 성공");
            return data;
        } catch (e) {
            errorEl.textContent = e.message;
        }
    }

    btnCreate.onclick = () => {
        request(base(), {
            method: "POST",
            body: JSON.stringify({
                authorId: +authorId.value,
                title: title.value,
                content: content.value
            })
        }, createMsg, createErr);
    };

    btnDetail.onclick = () => {
        request(`${base()}/${detailId.value}`, { method: "GET" },
            null, detailErr, detailOut);
    };

    btnUpdate.onclick = () => {
        request(`${base()}/${updateId.value}`, {
            method: "PUT",
            body: JSON.stringify({
                title: updateTitle.value,
                content: updateContent.value
            })
        }, updateMsg, updateErr);
    };

    btnDelete.onclick = () => {
        request(`${base()}/${deleteId.value}`, {
            method: "DELETE"
        }, deleteMsg, deleteErr);
    };
</script>

</body>
</html>
